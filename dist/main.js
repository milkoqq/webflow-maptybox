var pt=Object.defineProperty;var ft=(n,d,a)=>d in n?pt(n,d,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[d]=a;var L=(n,d,a)=>(ft(n,typeof d!="symbol"?d+"":d,a),a),st=(n,d,a)=>{if(!d.has(n))throw TypeError("Cannot "+a)};var t=(n,d,a)=>(st(n,d,"read from private field"),a?a.call(n):d.get(n)),c=(n,d,a)=>{if(d.has(n))throw TypeError("Cannot add the same private member more than once");d instanceof WeakSet?d.add(n):d.set(n,a)},l=(n,d,a,Q)=>(st(n,d,"write to private field"),Q?Q.call(n,a):d.set(n,a),a);var __vite_style__=document.createElement("style");__vite_style__.innerHTML=`/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */.toastify{padding:12px 20px;color:#fff;display:inline-block;box-shadow:0 3px 6px -1px #0000001f,0 10px 36px -4px #4d60e84d;background:-webkit-linear-gradient(315deg,#73a5ff,#5477f5);background:linear-gradient(135deg,#73a5ff,#5477f5);position:fixed;opacity:0;transition:all .4s cubic-bezier(.215,.61,.355,1);border-radius:2px;cursor:pointer;text-decoration:none;max-width:calc(50% - 20px);z-index:2147483647}.toastify.on{opacity:1}.toast-close{background:transparent;border:0;color:#fff;cursor:pointer;font-family:inherit;font-size:1em;opacity:.4;padding:0 5px}.toastify-right{right:15px}.toastify-left{left:15px}.toastify-top{top:-150px}.toastify-bottom{bottom:-150px}.toastify-rounded{border-radius:25px}.toastify-avatar{width:1.5em;height:1.5em;margin:-7px 5px;border-radius:2px}.toastify-center{margin-left:auto;margin-right:auto;left:0;right:0;max-width:fit-content;max-width:-moz-fit-content}@media only screen and (max-width: 360px){.toastify-right,.toastify-left{margin-left:auto;margin-right:auto;left:0;right:0;max-width:fit-content}}
`;document.head.appendChild(__vite_style__);(function(n){typeof define=="function"&&define.amd?define(n):n()})(function(){var R,S,U,h,K,I,y,k,m,v,H,_,x,O,N,$,r,tt,T,V;"use strict";var n=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},d={exports:{}};/*!
* Toastify js 1.12.0
* https://github.com/apvarun/toastify-js
* @license MIT licensed
*
* Copyright (C) 2018 Varun A P
*/(function(Y){(function(i,e){Y.exports?Y.exports=e():i.Toastify=e()})(n,function(i){var e=function(o){return new e.lib.init(o)},s="1.12.0";e.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},e.lib=e.prototype={toastify:s,constructor:e,init:function(o){return o||(o={}),this.options={},this.toastElement=null,this.options.text=o.text||e.defaults.text,this.options.node=o.node||e.defaults.node,this.options.duration=o.duration===0?0:o.duration||e.defaults.duration,this.options.selector=o.selector||e.defaults.selector,this.options.callback=o.callback||e.defaults.callback,this.options.destination=o.destination||e.defaults.destination,this.options.newWindow=o.newWindow||e.defaults.newWindow,this.options.close=o.close||e.defaults.close,this.options.gravity=o.gravity==="bottom"?"toastify-bottom":e.defaults.gravity,this.options.positionLeft=o.positionLeft||e.defaults.positionLeft,this.options.position=o.position||e.defaults.position,this.options.backgroundColor=o.backgroundColor||e.defaults.backgroundColor,this.options.avatar=o.avatar||e.defaults.avatar,this.options.className=o.className||e.defaults.className,this.options.stopOnFocus=o.stopOnFocus===void 0?e.defaults.stopOnFocus:o.stopOnFocus,this.options.onClick=o.onClick||e.defaults.onClick,this.options.offset=o.offset||e.defaults.offset,this.options.escapeMarkup=o.escapeMarkup!==void 0?o.escapeMarkup:e.defaults.escapeMarkup,this.options.ariaLive=o.ariaLive||e.defaults.ariaLive,this.options.style=o.style||e.defaults.style,o.backgroundColor&&(this.options.style.background=o.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var o=document.createElement("div");o.className="toastify on "+this.options.className,this.options.position?o.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(o.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):o.className+=" toastify-right",o.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var p in this.options.style)o.style[p]=this.options.style[p];if(this.options.ariaLive&&o.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)o.appendChild(this.options.node);else if(this.options.escapeMarkup?o.innerText=this.options.text:o.innerHTML=this.options.text,this.options.avatar!==""){var w=document.createElement("img");w.src=this.options.avatar,w.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?o.appendChild(w):o.insertAdjacentElement("afterbegin",w)}if(this.options.close===!0){var g=document.createElement("button");g.type="button",g.setAttribute("aria-label","Close"),g.className="toast-close",g.innerHTML="&#10006;",g.addEventListener("click",function(D){D.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var f=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&f>360?o.insertAdjacentElement("afterbegin",g):o.appendChild(g)}if(this.options.stopOnFocus&&this.options.duration>0){var b=this;o.addEventListener("mouseover",function(D){window.clearTimeout(o.timeOutValue)}),o.addEventListener("mouseleave",function(){o.timeOutValue=window.setTimeout(function(){b.removeElement(o)},b.options.duration)})}if(typeof this.options.destination!="undefined"&&o.addEventListener("click",function(D){D.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),typeof this.options.onClick=="function"&&typeof this.options.destination=="undefined"&&o.addEventListener("click",function(D){D.stopPropagation(),this.options.onClick()}.bind(this)),typeof this.options.offset=="object"){var M=u("x",this.options),C=u("y",this.options),et=this.options.position=="left"?M:"-"+M,ht=this.options.gravity=="toastify-top"?C:"-"+C;o.style.transform="translate("+et+","+ht+")"}return o},showToast:function(){this.toastElement=this.buildToast();var o;if(typeof this.options.selector=="string"?o=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot!="undefined"&&this.options.selector instanceof ShadowRoot?o=this.options.selector:o=document.body,!o)throw"Root element is not defined";var p=e.defaults.oldestFirst?o.firstChild:o.lastChild;return o.insertBefore(this.toastElement,p),e.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(o){o.className=o.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),o.parentNode&&o.parentNode.removeChild(o),this.options.callback.call(o),e.reposition()}.bind(this),400)}},e.reposition=function(){for(var o={top:15,bottom:15},p={top:15,bottom:15},w={top:15,bottom:15},g=document.getElementsByClassName("toastify"),f,b=0;b<g.length;b++){P(g[b],"toastify-top")===!0?f="toastify-top":f="toastify-bottom";var M=g[b].offsetHeight;f=f.substr(9,f.length-1);var C=15,et=window.innerWidth>0?window.innerWidth:screen.width;et<=360?(g[b].style[f]=w[f]+"px",w[f]+=M+C):P(g[b],"toastify-left")===!0?(g[b].style[f]=o[f]+"px",o[f]+=M+C):(g[b].style[f]=p[f]+"px",p[f]+=M+C)}return this};function u(o,p){return p.offset[o]?isNaN(p.offset[o])?p.offset[o]:p.offset[o]+"px":"0px"}function P(o,p){return!o||typeof p!="string"?!1:!!(o.className&&o.className.trim().split(/\s+/gi).indexOf(p)>-1)}return e.lib.init.prototype=e.lib,e})})(d);var a=d.exports,Q="";const j=document.querySelector("#app_form-position-select"),Z=document.querySelector("#app_form-type-select"),q=document.querySelector("#app_form-sortby-select"),B=document.querySelector("#app_form-input-ending"),E=document.querySelector("#app_form-input-duration"),ot=document.querySelector("#app_form-input-distance-label"),F=document.querySelector('[js-input="startingPos"]');document.querySelector(".form_workout-distance-label"),document.querySelector(".form_workout-duration-label"),document.querySelector(".form_workout-pace-label"),document.querySelector(".form_workout-temp-label");const W=document.querySelector(".app_input-label-danger"),at=document.querySelector(".app_options-component"),z=document.querySelector(".app_left-form-input"),nt=document.querySelector('[js-element="workout"]'),G=document.querySelector(".app_form-begin"),rt=document.querySelector(".app_form-wrapper"),A=document.querySelector(".app_left-workout-container"),X=document.querySelector("#button-save"),lt=document.querySelector("#button-cancel");document.querySelector("#button-delete"),document.querySelector("#button-edit");const dt=document.querySelector('[js-element="deleteAll"]'),J=document.querySelector('[js-button="saveEdit"]'),ct=document.querySelector(".app_options-locate-wrapper");class it{constructor(i,e,s,u,P,o,p,w){L(this,"_id",this._randomNumber(1,1e3));L(this,"_date",new Date);L(this,"_weatherToken","c0c4cb552464fc0334187736473c053a");this.type=i,this.distance=e,this.duration=s,this.temperature=u,this.locationRoad=P,this.locationCity=o,this.route=p,this._getPace()}_randomNumber(i,e){return Math.floor(Math.random()*(e-i+1))+i}_getPace(){return this.pace=Number((this.distance/this.duration).toFixed(1))}}class ut{constructor(){c(this,R,"pk.eyJ1IjoibWlsa29xcSIsImEiOiJjbDliczUwejEwcnd6M3ZtejNpY3BuMTV3In0.88orHaz8EYjsOvloMJQd7Q");c(this,S,void 0);c(this,U,"walking");c(this,h,void 0);c(this,K,13);c(this,I,[]);c(this,y,void 0);c(this,k,void 0);c(this,m,void 0);c(this,v,void 0);c(this,H,[]);c(this,_,void 0);c(this,x,void 0);c(this,O,void 0);c(this,N,void 0);c(this,$,void 0);c(this,r,[]);c(this,tt,void 0);c(this,T,void 0);c(this,V,void 0);L(this,"_isAdding",!1);L(this,"_isShowing",!1);L(this,"_isEditing",!1);L(this,"_workoutToEdit");L(this,"_displayedWorkout");L(this,"_months",["January","February","March","April","May","June","July","August","September","October","November","December"]);this._init(),rt.addEventListener("click",this._handleWorkout.bind(this)),nt.addEventListener("click",this._showWorkoutOnMap),ct.addEventListener("click",this._addNewWorkout.bind(this)),X.addEventListener("click",this._newWorkout.bind(this)),dt.addEventListener("click",this._deleteAllWorkouts.bind(this)),J.addEventListener("click",this._saveEditWorkout.bind(this)),lt.addEventListener("click",this._cancelNewWorkout.bind(this)),q.addEventListener("change",this._sortWorkouts.bind(this))}async _init(){try{console.log("Initialization "),J.style.display="none",F.style.display="none";const i=await this._getPosition().catch(u=>console.log(u)),{longitude:e,latitude:s}=i.coords;l(this,_,e),l(this,x,s),await this._loadMap(e,s),this._setMarkerStart(e,s),t(this,h).on("click",this._setMarkerEnd.bind(this)),j.addEventListener("change",this._setMarkerStartToDrag.bind(this))}catch(i){console.log(i)}}_getPosition(){return new Promise(function(i,e){navigator.geolocation.getCurrentPosition(i,e)})}wait(i){return new Promise(e=>{setTimeout(e,i*1e3)})}async _loadMap(i,e){try{l(this,h,new mapboxgl.Map({accessToken:t(this,R),container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[i,e],zoom:t(this,K)}))}catch{throw new Error("Could not Initialize Map")}}_setMarkerStart(i,e){l(this,y,new mapboxgl.Marker().setLngLat([i,e]).addTo(t(this,h))),l(this,k,Object.values(t(this,y).getLngLat())),t(this,I).push(t(this,y)),t(this,H).push(t(this,k))}async _setMarkerEnd(i){if(!t(this,m)){let{lng:s,lat:u}=i.lngLat;l(this,v,[s,u]),l(this,m,new mapboxgl.Marker({color:"#FFFFFF",draggable:!0}).setLngLat([s,u]).addTo(t(this,h))),B.value=`${s.toFixed(4)}, ${u.toFixed(4)}`,t(this,I).push(t(this,m)),t(this,H).push([s,u]),await this._fetchRoute(t(this,k),t(this,v)),t(this,m).setPopup(new mapboxgl.Popup({closeOnClick:!1}).setHTML(`<h4>Workout in ${t(this,$)}, ${t(this,N)}. <br> <span style="font-style: italic;">Distance: ${t(this,S)}km</span></h4>`)),t(this,m).togglePopup(),G.classList.add("is--hidden"),z.classList.remove("is--hidden"),this._isAdding=!0,E.focus()}async function e(){l(this,v,Object.values(t(this,m).getLngLat())),B.value=`${t(this,v)[0].toFixed(4)}, ${t(this,v)[1].toFixed(4)}`,await this._fetchRoute(t(this,k),t(this,v))}t(this,m).on("dragend",e.bind(this))}_setMarkerStartToDrag(){j.value==="dragToPos"&&(t(this,y).setDraggable(!0),t(this,y).on("dragend",this._updateMarkerStartCoords.bind(this))),j.value==="currentPos"&&(t(this,y).remove(),this._setMarkerStart(t(this,_),t(this,x)),l(this,k,Object.values(t(this,y).getLngLat())),this._fetchRoute(t(this,k),t(this,v)))}_updateMarkerStartCoords(){l(this,k,Object.values(t(this,y).getLngLat())),this._fetchRoute(t(this,k),t(this,v))}_getJSON(i,e="Something went wrong"){return fetch(i).then(s=>{if(!s.ok)throw new Error(`${e} (${s.status})`);return s.json()})}async _fetchRoute(i,e){var b,M,C;const s=await fetch(`https://api.mapbox.com/directions/v5/mapbox/${t(this,U)}/${i[0]},${i[1]};${e[0]},${e[1]}?steps=true&geometries=geojson&access_token=${t(this,R)}`),u=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${i[1]}&longitude=${i[0]}&hourly=temperature_2m&current_weather=true`),P=await fetch(`https://api.geoapify.com/v1/geocode/reverse?lat=${e[1]}&lon=${e[0]}&apiKey=ae4d111379a849988e6112880aba2273`),o=await u.json(),p=await s.json(),w=await P.json();l(this,$,(M=(b=w.features[0].properties.street)!=null?b:w.features[0].properties.address_line1)!=null?M:w.features[0].properties.address_line2),l(this,N,(C=w.features[0].properties.city)!=null?C:w.features[0].properties.country);const g=p.routes[0];l(this,S,(g.distance/1e3).toFixed(2)),l(this,O,o.current_weather.temperature),ot.textContent=`Distance: ${t(this,S)}km`,l(this,T,g.geometry.coordinates);const f={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t(this,T)}};t(this,h).getSource("route")?t(this,h).getSource("route").setData(f):t(this,h).addLayer({id:"route",type:"line",source:{type:"geojson",data:f},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":5,"line-opacity":.75}}),t(this,m).setPopup(new mapboxgl.Popup({closeOnClick:!1}).setHTML(`<h4>Workout in ${t(this,$)}, ${t(this,N)}. <br> <span style="font-style: italic;"> Distance: ${t(this,S)}km</span></h4>`)),t(this,m).togglePopup()}_newWorkout(i){if(i.preventDefault(),!(E.value&&E.value>0)){W.style.opacity=1,W.textContent="Required";return}if(!t(this,m)){console.log("Set an ending-route marker on map!");return}const e=Z.value,s=+E.value;let u;e==="running"&&(u=new it(e,+t(this,S),s,t(this,O),t(this,$),t(this,N),t(this,T))),e==="cycling"&&(u=new it(e,+t(this,S),s,t(this,O),t(this,$),t(this,N),t(this,T))),t(this,r).push(u),this._renderWorkout(u),t(this,r).length>0&&at.classList.remove("is--hidden"),t(this,m).setDraggable(!1),t(this,y).setDraggable(!1),this._removeMapElements(),this._setMarkerStart(t(this,_),t(this,x)),W.style.opacity=0,this._isAdding=!1,j.value="currentPos",a({text:"Workout added successfully.",duration:1e3,style:{background:"rgba(19, 189, 0, 1)",color:"white"}}).showToast()}_renderWorkout(i){i._date=new Date(i._date),l(this,V,`
        <div class="app_left-form-workout">
        <div class="app_left-form-workout-side is--${i.type}"></div>
        <div class="app_left-form-workout-main" data-id="${i._id}">
          <div class="form_workout-main-top">
          <div class="text-size-small">${String(i._date.getDate())} ${this._months[i._date.getMonth()]} ${i._date.getFullYear()}</div>

          </div>
          <div class="form_workout-main-mid">
            <div class="text-block-5">Running in <span class="text-span">${i.locationRoad}, ${i.locationCity}.</span></div>
          </div>
          <div class="form_workout-main-bottom">
            <div class="div-block-7">
              <div class="form_workout-stats-wrapper"><img src="https://www.svgrepo.com/show/406153/man-biking-medium-dark-skin-tone.svg" loading="lazy" id="app_cycling-icon" alt="" class="workout-stats-icon is--hidden">
              <img src="${i.type==="running"?"https://www.svgrepo.com/show/400693/running.svg":"https://uploads-ssl.webflow.com/62fbb644e10f136346d86d9e/630370d60fed0a1883f92513_%F0%9F%9A%B4_%E2%99%80%EF%B8%8F.svg"}" loading="lazy" id="app_running - icon" alt="" class="workout-stats-icon">
            <div class="form_workout-distance-label"> ${i.distance}</div>
                <div class="margin-left margin-xxsmall">
                    <div class="text-size-tiny">KM</div>
                </div>
              </div >
              <div class="form_workout-stats-wrapper">
            <img src="https://www.svgrepo.com/show/112325/timer.svg" loading="lazy" alt="" class="workout-stats-icon-copy">
                <div class="form_workout-duration-label">${i.duration}</div>
                <div class="margin-left margin-xxsmall">
                  <div class="text-size-tiny">MIN</div>
                </div>
              </div>
              <div class="form_workout-stats-wrapper"><img src="https://www.svgrepo.com/show/233266/bolt-thunder.svg" loading="lazy" alt="" class="workout-stats-icon-copy">
                <div class="form_workout-pace-label">${i.pace}</div>
                <div class="margin-left margin-xxsmall">
                  <div class="text-size-tiny">KM/MIN</div>
                </div>
              </div>
              <div class="form_workout-stats-wrapper"><img src="https://www.svgrepo.com/show/15601/sun.svg" loading="lazy" alt="" class="workout-stats-icon-copy">
                <div class="form_workout-temp-label">${i.temperature}</div>
                <div class="margin-left margin-xxsmall">
                  <div class="text-size-tiny">\xB0C</div>
                </div>
              </div>
            </div >
            <div class="form_workout-edit-wrapper">
                <div class="form_workout-edit-action"><img src="https://uploads-ssl.webflow.com/62fbb644e10f136346d86d9e/630351b40fed0ac1b5f7acf8_Vector.svg" loading="lazy" alt="" id="button-edit" class="form_workout-edit-img"></div>
                <div class="form_workout-edit-action"><img src="https://uploads-ssl.webflow.com/62fbb644e10f136346d86d9e/630351b3ee19b62ebdbb93dc_Vector-1.svg" loading="lazy" alt="" id="button-delete" class="form_workout-edit-img"></div>
                <a js-element="viewWorkout" id="button-view" href="#">View</a>
            </div>
          </div >
        </div >
            `),A.insertAdjacentHTML("beforeend",t(this,V)),z.classList.add("is--hidden")}_removeMapElements(){t(this,y)&&t(this,y).remove(),t(this,m)&&t(this,m).remove(),l(this,m,null),t(this,h).getLayer("route")&&(t(this,h).removeLayer("route"),t(this,h).removeSource("route"),l(this,T,[])),E.value=""}_addNewWorkout(){j.value="currentPos",this._removeMapElements(),this._setMarkerStart(t(this,_),t(this,x)),t(this,h).flyTo({center:[t(this,_),t(this,x)],essential:!0,zoom:14}),W.style.opacity=0,E.focus(),X.style.display="inline-block",j.style.display="inline-block",F.style.display="none",J.style.display="none"}_sortWorkouts(i){if(t(this,r).length<=1){console.log(q.value),console.log("No workouts to sort. Please add a workout"),a({text:`No workouts to sort. 
 Please add more than 1 workouts.`,duration:2e3,style:{background:"rgba(255, 102, 25, 1)",color:"white"}}).showToast(),q.value="default";return}switch(A.innerHTML="",q.value){case"distance-asc":a({text:"Sorted by Distance-Asc",duration:2e3,style:{background:"rgba(189, 126, 0, 1)",color:"white"}}).showToast(),t(this,r).sort((e,s)=>e.distance-s.distance);break;case"distance-dsc":a({text:"Sorted by Distance-Dsc",duration:2e3,style:{background:"rgba(189, 126, 0, 1)",color:"white"}}).showToast(),t(this,r).sort((e,s)=>s.distance-e.distance);break;case"duration-asc":a({text:"Sorted by Duration-Asc",duration:2e3,style:{background:"rgba(189, 126, 0, 1)",color:"white"}}).showToast(),t(this,r).sort((e,s)=>e.duration-s.duration);break;case"duration-dsc":a({text:"Sorted by Duration-Dsc",duration:2e3,style:{background:"rgba(189, 126, 0, 1)",color:"white"}}).showToast(),t(this,r).sort((e,s)=>s.duration-e.duration);break;case"pace-asc":a({text:"Sorted by Pace-Asc",duration:2e3,style:{background:"rgba(189, 126, 0, 1)",color:"white"}}).showToast(),t(this,r).sort((e,s)=>s.pace-e.pace);break;case"pace-dsc":a({text:"Sorted by Pace-Dsc",duration:2e3,style:{background:"rgba(189, 126, 0, 1)",color:"white"}}).showToast(),t(this,r).sort((e,s)=>s.pace-e.pace);break}t(this,r).forEach(e=>this._renderWorkout(e))}_showRouteOnMap(i){this._isShowing=!0,this._removeMapElements(),this._setMarkerStart(i[0][0],i[0][1]),l(this,v,[i.at(-1)[0],i.at(-1)[1]]),l(this,m,new mapboxgl.Marker({color:"#000",draggable:!1}).setLngLat(t(this,v)).addTo(t(this,h)));const e={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i}};t(this,h).getSource("route")?t(this,h).getSource("route").setData(e):t(this,h).addLayer({id:"route",type:"line",source:{type:"geojson",data:e},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":5,"line-opacity":.75}})}_handleWorkout(i){let e=i.target.closest(".app_left-form-workout-main");if(!!e){if(i.target.id==="button-delete"){if(this._isEditing){a({text:"Unable to delete while editing.",duration:2e3,style:{background:"rgba(255, 102, 25, 1)",color:"white"}}).showToast();return}l(this,r,t(this,r).filter(s=>s._id!==Number(e.dataset.id))),console.log(`Workout #${e.dataset.id} deleted.`),a({text:"Workout deleted.",duration:1e3,style:{background:"rgba(255, 102, 25, 1)",color:"white"}}).showToast(),A.innerHTML="",this._isShowing&&+e.dataset.id===this._displayedWorkout._id&&this._removeMapElements(),t(this,r).forEach(s=>this._renderWorkout(s)),t(this,r).length===0&&(this._removeMapElements(),console.log("There are no more workouts! Start fresh."),G.classList.remove("is--hidden"),this._setMarkerStart(t(this,_),t(this,x)))}if(i.target.id==="button-edit"&&(this._isEditing=!0,this._workoutToEdit=t(this,r).find(s=>s._id===+e.dataset.id),console.log(this._workoutToEdit),this._showRouteOnMap(this._workoutToEdit.route),z.classList.remove("is--hidden"),X.style.display="none",j.style.display="none",F.style.display="inline-block",J.style.display="inline-block",W.style.opacity=0,E.value=this._workoutToEdit.duration,ot.textContent=`Distance: ${this._workoutToEdit.distance} KM`,Z.value=this._workoutToEdit.type,F.disabled=!0,B.disabled=!0,F.value=this._workoutToEdit.route.at(0).toString().split(",").join(", "),B.value=this._workoutToEdit.route.at(-1).toString().split(",").join(", ")),i.target.id==="button-view"){if(this._isAdding)return;this._displayedWorkout=t(this,r).find(u=>u._id===+e.dataset.id),l(this,T,this._displayedWorkout.route),console.log(this._displayedWorkout),this._showRouteOnMap(t(this,T));let s=[this._displayedWorkout.route[0],this._displayedWorkout.route.at(-1)];t(this,h).fitBounds(s,{padding:{top:40,bottom:50,left:200,right:200}})}}}_deleteAllWorkouts(){if(this._isEditing){console.log("Currently editing workout. Unable to delete all workouts."),a({text:`Currently editing workout. 
 Unable to delete all workouts.`,duration:2500,style:{background:"rgba(189, 126, 0, 1)",color:"white"}}).showToast();return}if(console.log(t(this,r)),t(this,r).length===0){console.log("No workouts to delete."),a({text:"No workouts to delete.",duration:1e3,style:{background:"rgba(189, 126, 0, 1)",color:"white"}}).showToast();return}l(this,r,[]),A.innerHTML="",q.value="default",t(this,r).forEach(i=>this._renderWorkout(i)),this._removeMapElements(),this._setMarkerStart(t(this,_),t(this,x)),G.classList.remove("is--hidden"),console.log("All workouts deleted. Click on map to start and add again!"),a({text:"All workouts deleted.",duration:2e3,style:{background:"rgba(255, 102, 25, 1)",color:"white"}}).showToast()}_saveEditWorkout(i){if(i.preventDefault(),!(E.value&&E.value>0)){W.style.opacity=1,W.textContent="Required";return}this._workoutToEdit.duration=+E.value,this._workoutToEdit.type=Z.value,A.innerHTML="",t(this,r).forEach(e=>this._renderWorkout(e)),z.classList.add("is--hidden"),this._removeMapElements(),this._showRouteOnMap(this._workoutToEdit.route),console.log("Changes saved successfully"),a({text:"Workout saved successfully.",duration:1e3,style:{background:"rgba(19, 189, 0, 1)",color:"white"}}).showToast(),this._isEditing=!1}_cancelNewWorkout(){z.classList.add("is--hidden"),this._removeMapElements(),this._setMarkerStart(t(this,_),t(this,x)),console.log("Process Cancelled"),a({text:"Process cancelled.",duration:1e3,style:{background:"rgba(189, 126, 0, 1)",color:"white"}}).showToast(),this._isEditing=!1,W.style.opacity=0}}R=new WeakMap,S=new WeakMap,U=new WeakMap,h=new WeakMap,K=new WeakMap,I=new WeakMap,y=new WeakMap,k=new WeakMap,m=new WeakMap,v=new WeakMap,H=new WeakMap,_=new WeakMap,x=new WeakMap,O=new WeakMap,N=new WeakMap,$=new WeakMap,r=new WeakMap,tt=new WeakMap,T=new WeakMap,V=new WeakMap,new ut});
